# Firestore Schema Documentation

This document outlines the structure of the Firestore database used by the BookDate application.

## Collections

### `appointments`

Stores information about booked appointments.

**Document ID:** Auto-generated by Firestore

**Fields:**

| Field Name  | Type      | Description                                     | Example                                  |
| :---------- | :-------- | :---------------------------------------------- | :--------------------------------------- |
| `clientName`  | `string`  | The full name of the client making the booking. | "Jane Doe"                               |
| `clientEmail` | `string`  | The email address of the client.                | "jane.doe@example.com"                   |
| `date`        | `Timestamp` | The date of the appointment (start of day).   | `firebase.firestore.Timestamp.fromDate(new Date('2024-05-20'))` |
| `time`        | `string`  | The specific time slot booked (HH:mm format). | "10:30"                                  |
| `createdAt`   | `Timestamp` | Timestamp when the appointment was created.     | `firebase.firestore.Timestamp.now()`     |

**Indexes:**

*   **Composite Index:**
    *   **Collection:** `appointments`
    *   **Fields:** `date` (Ascending), `time` (Ascending)
    *   **Purpose:** Required for querying appointments filtered by date range and ordered by time (used in both client and admin views).
    *   **Creation:** This index needs to be created manually in the Firebase Firestore console. Firebase usually provides a direct link in the error message when this index is missing. The link looks similar to this: `https://console.firebase.google.com/v1/r/project/YOUR_PROJECT_ID/firestore/indexes?create_composite=...`

### `availability`

Stores information about blocked time slots for specific dates. If a document for a date doesn't exist, default working hours are assumed.

**Document ID:** Date string in `YYYY-MM-DD` format.

**Fields:**

| Field Name    | Type           | Description                                      | Example             |
| :------------ | :------------- | :----------------------------------------------- | :------------------ |
| `blockedTimes`| `array<string>`| An array of time slots (HH:mm) that are blocked. | `["09:00", "14:30"]`|

**Example Document (`availability/2024-05-21`):**

```json
{
  "blockedTimes": ["11:00", "11:30", "15:00"]
}
```

### `users` (Implied for Authentication)

While not explicitly defined in the current code's data fetching, Firebase Authentication typically manages user data. If custom user profiles or roles were needed, a `users` collection would be standard.

**Document ID:** Firebase Auth User UID

**Potential Fields:**

| Field Name  | Type      | Description                                   | Example         |
| :---------- | :-------- | :-------------------------------------------- | :-------------- |
| `email`     | `string`  | User's email (often matches Auth email).    | "admin@example.com" |
| `role`      | `string`  | User role (e.g., 'admin').                  | "admin"         |
| `displayName`| `string`  | User's display name (optional).             | "Admin User"    |
| `createdAt` | `Timestamp` | Timestamp when the user profile was created. | `firebase.firestore.Timestamp.now()` |
```